# Lab 06 Модель акторів

## Завдання

1. Проаналізуйте один із наведених нижче варіантів коду і вкажіть на можливі помилки.  
2. Створіть модульні тести (pytest), які покажуть наявність помилок. Один тест має перевіряти одну помилку  
3. Проаналізуйте важливість знайдених помилок.  
4. Виправте помилки.  
5. За допомогою тестів покажіть, що помилки виправлено.

Результатом роботи є jupyter notebook в  [Google Colab](https://colab.google/) або репозиторій на github, який містить завдання, початковий варіант коду із тестами, виправлений варіант коду із тестами, пояснення виправлень.

Рекомендується використовувати одну з LLM ([https://chatgpt.com/](https://chatgpt.com/) , [https://gemini.google.com/](https://gemini.google.com/) , [https://chat.deepseek.com/](https://chat.deepseek.com/) або іншу) для прискорення роботи. 

## Хід роботи

1. **Ознайомлення з теоретичними відомостями:** Повторити основні принципи моделі акторів: ізольований стан кожного актора, комунікація лише через повідомлення, асинхронна обробка, можливість створення нових акторів, відсутність явних блокувань. Звернути увагу, які проблеми ця модель усуває (гонки даних, deadlock) і які типові помилки можуть залишатися у практичній реалізації (наприклад, неправильне використання черг або блокуючих викликів).

2. **Вибір коду для аналізу:** Обрати один із запропонованих варіантів коду з акторами (наприклад, на основі Python `asyncio`, `multiprocessing` чи бібліотек для акторної моделі).

3. **Аналіз початкового коду:** Уважно переглянути реалізацію класу актора та механізм обміну повідомленнями. Типові можливі помилки:  
    – використання спільних змінних без ізоляції;  
    – блокуючі операції всередині асинхронних методів;  
    – відсутність перевірки наявності повідомлень у черзі;  
    – неправильне завершення акторів (витік ресурсів, зависання);  
    – відсутність обробки винятків під час обробки повідомлень.

4. **Формулювання переліку помилок:** Скласти список знайдених проблем. Для кожної вказати: де вона проявляється, чому порушує принципи моделі акторів, до яких наслідків може призвести (наприклад, блокування, втрата повідомлень, некоректна робота системи).

5. **Створення модульних тестів:** Для кожної знайденої помилки створити окремий тест. Один тест має перевіряти лише одну проблему. Приклади:  
    – тест, що виявляє гонку даних через спільну змінну;  
    – тест, що показує зависання актора через блокуючий виклик;  
    – тест, що перевіряє, чи правильно обробляються винятки у повідомленнях.

6. **Аналіз важливості помилок:** Оцінити критичність кожної помилки:  
    – критичні (порушення принципів моделі, зависання, втрата повідомлень);  
    – середньої важливості (погіршення продуктивності чи масштабованості);  
    – менш важливі (наприклад, відсутність оптимізації).

7. **Виправлення коду:** Внести зміни у вихідний код:  
    – забезпечити ізоляцію стану актора;  
    – замінити блокуючі операції на асинхронні (`await asyncio.sleep()` замість `time.sleep()`);  
    – правильно закрити всі черги та ресурси;  
    – додати обробку винятків у логіку актора.

8. **Перевірка виправленої версії тестами:** Запустити підготовлені тести. Переконатися, що після виправлення вони проходять успішно, підтверджуючи усунення проблем.

9. **Оформлення результатів:** Створити Jupyter Notebook у Google Colab або репозиторій на GitHub із такою структурою:  
    – постановка завдання;  
    – початковий код із тестами, що виявляють помилки;  
    – список помилок і їхній аналіз;  
    – виправлений код;  
    – результати запуску тестів після виправлень;  
    – пояснення, чому зміни є правильними.

10. **Фінальний аналіз і висновки:**  Підсумувати, які проблеми були виявлені, чому вони важливі для акторної моделі, як були виправлені, і що це дало для надійності та масштабованості системи.

